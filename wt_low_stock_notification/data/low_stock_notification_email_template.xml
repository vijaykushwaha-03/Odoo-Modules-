<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Low Stock Notification Email Template -->
        <record id="low_stock_notification_email_template" model="mail.template">
            <field name="name">Low Stock Notification</field>
            <field name="model_id" ref="product.model_product_template" />
            <field name="subject">⚠ Low Stock Alert</field>
            <field name="email_from">no-reply@yourcompany.com</field>
            <field name="email_to">${object.email}</field>
            <field name="auto_delete" eval="True" />
            <field name="body_html">
                <![CDATA[
                    <div style="padding: 15px; font-family: Arial;">
                        <p style="font-size: 18px; font-weight: bold;">⚠ Low Stock Alert</p>
                        <p>Hello <t t-out="user.name or 'User'"/>,</p>
                        <p>
                            <t t-out="ctx.get('alert_message')"/>
                        </p>
                        <table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; width: 100%; margin-top: 15px; background: #fff;">
                            <thead>
                                <tr style="background-color: #f2f2f2; text-align: left;">
                                    <th style="padding: 10px; border-bottom: 2px solid #ddd;">Product ID</th>
                                    <th style="padding: 10px; border-bottom: 2px solid #ddd;">Product Name</th>
                                    <th style="padding: 10px; border-bottom: 2px solid #ddd;">On Hand Quantity</th>
                                    <th style="padding: 10px; border-bottom: 2px solid #ddd;">Forecast Quantity</th>
                                    <th style="padding: 10px; border-bottom: 2px solid #ddd;">Minimum Required</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="ctx.get('product_data', [])" t-as="product">
                                    <tr>
                                        <td style="padding: 8px; border: 1px solid #ddd;"><t t-out="product['id']"/></td>
                                        <td style="padding: 8px; border: 1px solid #ddd;"><t t-out="product['name']"/></td>
                                        <td style="padding: 8px; border: 1px solid #ddd;"><t t-out="product['qty_available']"/></td>
                                        <td style="padding: 8px; border: 1px solid #ddd;"><t t-out="product['virtual_available']"/></td> 
                                        <td style="padding: 8px; border: 1px solid #ddd; color: green;"><t t-out="product['minimum_quantity']"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                        <p style="margin-top: 20px; font-size: 14px; color: #555;">
                            Please restock these products to prevent shortages.
                        </p>
                        <p style="font-size: 14px; color: #777; text-align: center; margin-top: 20px;">
                            <b>Inventory Management Team</b>
                        </p>
                    </div>
                ]]>
            </field>
        </record>
    </data>
</odoo>